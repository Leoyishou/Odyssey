import{_ as i}from"./plugin-vue_export-helper-DlAUqK2U.js";import{c as a,f as n,o as l}from"./app-DyPYfXuN.js";const e={};function h(t,s){return l(),a("div",null,s[0]||(s[0]=[n(`<h2 id="测试" tabindex="-1"><a class="header-anchor" href="#测试"><span>测试</span></a></h2><p>这些测试全面覆盖了Raft算法的核心功能，包括领导选举、日志复制、持久化、恢复、快照等，并在各种网络条件（可靠、不可靠）和故障情况（节点崩溃、网络分区）下进行测试，以确保算法的正确性和鲁棒性。 这些测试涵盖了Raft算法的多个关键方面。我将总结主要的测试类别和它们测试的具体内容:</p><p>领导选举 (2A)</p><p>TestInitialElection2A: 测试初始选举是否能成功选出一个领导者<br> TestReElection2A: 测试网络故障后是否能重新选举领导者<br> TestManyElections2A: 测试在多次网络分区和重连后的选举</p><p>基本一致性和日志复制 (2B)</p><p>TestBasicAgree2B: 测试基本的日志复制和提交<br> TestRPCBytes2B: 检查RPC通信效率<br> TestFailAgree2B: 测试部分节点断开连接时的一致性<br> TestFailNoAgree2B: 测试多数节点断开时无法达成一致<br> TestConcurrentStarts2B: 测试并发的日志条目提交<br> TestRejoin2B: 测试分区后重新加入的节点行为<br> TestBackup2B: 测试领导者如何处理落后的跟随者日志<br> TestCount2B: 检查RPC调用次数是否合理</p><p>持久化和恢复 (2C)</p><p>TestPersist12C, TestPersist22C, TestPersist32C: 测试不同场景下的持久化和恢复<br> TestFigure82C: 模拟论文图8描述的复杂场景<br> TestUnreliableAgree2C: 在不可靠网络下测试一致性<br> TestFigure8Unreliable2C: 在不可靠网络下模拟图8场景<br> TestReliableChurn2C, TestUnreliableChurn2C: 测试频繁的配置变更</p><p>快照 (2D)</p><p>TestSnapshotBasic2D: 测试基本的快照功能<br> TestSnapshotInstall2D: 测试安装快照（网络断开情况） TestSnapshotInstallUnreliable2D: 测试不可靠网络下安装快照<br> TestSnapshotInstallCrash2D: 测试节点崩溃时的快照安装<br> TestSnapshotInstallUnCrash2D: 测试不可靠网络和节点崩溃下的快照安装</p><h2 id="测试思路" tabindex="-1"><a class="header-anchor" href="#测试思路"><span>测试思路</span></a></h2><h3 id="_1-cfg" tabindex="-1"><a class="header-anchor" href="#_1-cfg"><span>1. cfg</span></a></h3><ul><li>创建多个 Raft 节点实例</li><li>控制节点间的通信（可以模拟网络分区、延迟等）</li><li>启动和停止节点</li><li>检查节点的状态（如谁是领导者，当前的任期等）</li><li>模拟客户端请求</li><li>验证一致性和正确性</li></ul><h2 id="自己的测试结果" tabindex="-1"><a class="header-anchor" href="#自己的测试结果"><span>自己的测试结果</span></a></h2><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" data-title="java" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">===</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> RUN</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">   TestInitialElection2A</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">Test</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> (2A)</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">:</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> initial election </span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">...</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">  ...</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;"> Passed</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> --</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">   4.0</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">  3</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">   48</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">   13764</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">    0</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">--</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">-</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> PASS</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">:</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> TestInitialElection2A</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> (4</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:white;--shiki-dark:#FFFFFF;">03s</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">)</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">===</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> RUN</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">   TestReElection2A</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">Test</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> (2A)</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">:</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> election after network failure </span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">...</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">  ...</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;"> Passed</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> --</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">   6.6</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">  3</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">  108</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">   22958</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">    0</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">--</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">-</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> PASS</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">:</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> TestReElection2A</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> (6</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:white;--shiki-dark:#FFFFFF;">59s</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">)</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">===</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> RUN</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">   TestManyElections2A</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">Test</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> (2A)</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">:</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> multiple elections </span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">...</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">  ...</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;"> Passed</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> --</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">   7.0</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">  7</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">  346</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">   79044</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">    0</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">--</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">-</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> PASS</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">:</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> TestManyElections2A</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> (6</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:white;--shiki-dark:#FFFFFF;">98s</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">)</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">===</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> RUN</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">   TestBasicAgree2B</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">Test</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> (2B)</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">:</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> basic agreement </span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">...</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">  ...</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;"> Passed</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> --</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">   1.5</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">  3</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">   16</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">    4586</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">    3</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">--</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">-</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> PASS</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">:</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> TestBasicAgree2B</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> (1</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:white;--shiki-dark:#FFFFFF;">47s</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">)</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">===</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> RUN</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">   TestRPCBytes2B</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">Test</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> (2B)</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">:</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> RPC</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> byte</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> count </span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">...</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">  ...</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;"> Passed</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> --</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">   2.9</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">  3</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">   48</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">  114550</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">   11</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">--</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">-</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> PASS</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">:</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> TestRPCBytes2B</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> (2</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:white;--shiki-dark:#FFFFFF;">90s</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">)</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">===</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> RUN</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">   TestFailAgree2B</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">Test</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> (2B)</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">:</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> agreement despite follower disconnection </span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">...</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">  ...</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;"> Passed</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> --</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">   7.0</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">  3</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">   80</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">   22341</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">    8</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">--</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">-</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> PASS</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">:</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> TestFailAgree2B</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> (6</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:white;--shiki-dark:#FFFFFF;">96s</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">)</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">===</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> RUN</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">   TestFailNoAgree2B</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">Test</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> (2B)</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">:</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> no agreement </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">if</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> too many followers disconnect </span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">...</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">  ...</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;"> Passed</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> --</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">   4.3</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">  5</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">  125</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">   29716</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">    3</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">--</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">-</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> PASS</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">:</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> TestFailNoAgree2B</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> (4</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:white;--shiki-dark:#FFFFFF;">27s</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">)</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">===</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> RUN</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">   TestConcurrentStarts2B</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">Test</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> (2B)</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">:</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> concurrent </span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">Start</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">()s </span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">...</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">  ...</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;"> Passed</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> --</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">   1.5</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">  3</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">   12</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">    3438</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">    6</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">--</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">-</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> PASS</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">:</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> TestConcurrentStarts2B</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> (1</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:white;--shiki-dark:#FFFFFF;">53s</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">)</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">===</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> RUN</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">   TestRejoin2B</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">Test</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> (2B)</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">:</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> rejoin of partitioned leader </span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">...</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">  ...</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;"> Passed</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> --</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">   6.5</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">  3</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">  127</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">   30687</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">    4</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">--</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">-</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> PASS</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">:</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> TestRejoin2B</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> (6</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:white;--shiki-dark:#FFFFFF;">50s</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">)</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">===</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> RUN</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">   TestBackup2B</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">Test</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> (2B)</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">:</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> leader backs up quickly over incorrect follower logs </span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">...</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">  ...</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;"> Passed</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> --</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">  21.5</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">  5</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 1388</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 1126823</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">  102</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">--</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">-</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> PASS</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">:</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> TestBackup2B</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> (21</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:white;--shiki-dark:#FFFFFF;">53s</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">)</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">===</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> RUN</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">   TestCount2B</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">Test</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> (2B)</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">:</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> RPC</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> counts aren</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&#39;t too high ...</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">  ... Passed --   3.2  3   38   11397   12</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">--- PASS: TestCount2B (3.20s)</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">=== RUN   TestPersist12C</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">Test (2C): basic persistence ...</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">  ... Passed --   7.5  3   99   24361    6</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">--- PASS: TestPersist12C (7.50s)</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">=== RUN   TestPersist22C</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">Test (2C): more persistence ...</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">  ... Passed --  21.9  5  900  202916   16</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">--- PASS: TestPersist22C (21.88s)</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">=== RUN   TestPersist32C</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">Test (2C): partitioned leader and one follower crash, leader restarts ...</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">  ... Passed --   3.1  3   33    8347    4</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">--- PASS: TestPersist32C (3.15s)</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">=== RUN   TestFigure82C</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">Test (2C): Figure 8 ...</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">  ... Passed --  30.9  5  437   96545   20</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">--- PASS: TestFigure82C (30.94s)</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">=== RUN   TestUnreliableAgree2C</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">Test (2C): unreliable agreement ...</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">  ... Passed --   3.6  5  368  125743  246</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">--- PASS: TestUnreliableAgree2C (3.63s)</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">=== RUN   TestFigure8Unreliable2C</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">Test (2C): Figure 8 (unreliable) ...</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">  ... Passed --  31.8  5 2029 5839715   42</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">--- PASS: TestFigure8Unreliable2C (31.79s)</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">=== RUN   TestReliableChurn2C</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">Test (2C): churn ...</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">  ... Passed --  16.7  5 5143 5749212 3067</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">--- PASS: TestReliableChurn2C (16.70s)</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">=== RUN   TestUnreliableChurn2C</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">Test (2C): unreliable churn ...</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">  ... Passed --  16.2  5 1257 1044671  489</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">--- PASS: TestUnreliableChurn2C (16.15s)</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">=== RUN   TestSnapshotBasic2D</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">Test (2D): snapshots basic ...</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">  ... Passed --   5.7  3  179   65036  251</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">--- PASS: TestSnapshotBasic2D (5.73s)</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">=== RUN   TestSnapshotInstall2D</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">Test (2D): install snapshots (disconnect) ...</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">  ... Passed --  54.3  3 1046  287884  388</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">--- PASS: TestSnapshotInstall2D (54.34s)</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">=== RUN   TestSnapshotInstallUnreliable2D</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">Test (2D): install snapshots (disconnect+unreliable) ...</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">  ... Passed --  59.8  3 1179  307241  366</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">--- PASS: TestSnapshotInstallUnreliable2D (59.83s)</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">=== RUN   TestSnapshotInstallCrash2D</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">Test (2D): install snapshots (crash) ...</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">  ... Passed --  46.4  3  702  198750  399</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">--- PASS: TestSnapshotInstallCrash2D (46.39s)</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">=== RUN   TestSnapshotInstallUnCrash2D</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">Test (2D): install snapshots (unreliable+crash) ...</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">  ... Passed --  49.0  3  760  205531  355</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">--- PASS: TestSnapshotInstallUnCrash2D (49.02s)</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">PASS</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>这些测试涵盖了Raft算法的多个关键方面。我将总结主要的测试类别和它们测试的具体内容:</p><ol><li>领导选举 (2A) <ul><li>TestInitialElection2A: 测试初始选举是否能成功选出一个领导者</li><li>TestReElection2A: 测试网络故障后是否能重新选举领导者</li><li>TestManyElections2A: 测试在多次网络分区和重连后的选举</li></ul></li><li>基本一致性和日志复制 (2B) <ul><li>TestBasicAgree2B: 测试基本的日志复制和提交</li><li>TestRPCBytes2B: 检查RPC通信效率</li><li>TestFailAgree2B: 测试部分节点断开连接时的一致性</li><li>TestFailNoAgree2B: 测试多数节点断开时无法达成一致</li><li>TestConcurrentStarts2B: 测试并发的日志条目提交</li><li>TestRejoin2B: 测试分区后重新加入的节点行为</li><li>TestBackup2B: 测试领导者如何处理落后的跟随者日志</li><li>TestCount2B: 检查RPC调用次数是否合理</li></ul></li><li>持久化和恢复 (2C) <ul><li>TestPersist12C, TestPersist22C, TestPersist32C: 测试不同场景下的持久化和恢复</li><li>TestFigure82C: 模拟论文图8描述的复杂场景</li><li>TestUnreliableAgree2C: 在不可靠网络下测试一致性</li><li>TestFigure8Unreliable2C: 在不可靠网络下模拟图8场景</li><li>TestReliableChurn2C, TestUnreliableChurn2C: 测试频繁的配置变更</li></ul></li><li>快照 (2D) <ul><li>TestSnapshotBasic2D: 测试基本的快照功能</li><li>TestSnapshotInstall2D: 测试安装快照（网络断开情况）</li><li>TestSnapshotInstallUnreliable2D: 测试不可靠网络下安装快照</li><li>TestSnapshotInstallCrash2D: 测试节点崩溃时的快照安装</li><li>TestSnapshotInstallUnCrash2D: 测试不可靠网络和节点崩溃下的快照安装</li></ul></li></ol>`,17)]))}const r=i(e,[["render",h],["__file","lab2 raft.html.vue"]]),d=JSON.parse('{"path":"/1%20%E4%B8%80%E5%88%87%E7%9A%86%E9%A1%B9%E7%9B%AE/Q2%EF%BC%9A%E5%81%9ACS%E7%9A%84%E7%BB%8F%E5%85%B8lab/lab2%20raft.html","title":"lab2 raft","lang":"zh-CN","frontmatter":{"draw":null,"tags":[],"title":"lab2 raft","date created":"2024-09-02T00:00:00.000Z","date modified":"2024-11-12T00:00:00.000Z","description":"测试 这些测试全面覆盖了Raft算法的核心功能，包括领导选举、日志复制、持久化、恢复、快照等，并在各种网络条件（可靠、不可靠）和故障情况（节点崩溃、网络分区）下进行测试，以确保算法的正确性和鲁棒性。 这些测试涵盖了Raft算法的多个关键方面。我将总结主要的测试类别和它们测试的具体内容: 领导选举 (2A) TestInitialElection2A: ...","head":[["meta",{"property":"og:url","content":"https://vuepress-theme-hope-docs-demo.netlify.app/1%20%E4%B8%80%E5%88%87%E7%9A%86%E9%A1%B9%E7%9B%AE/Q2%EF%BC%9A%E5%81%9ACS%E7%9A%84%E7%BB%8F%E5%85%B8lab/lab2%20raft.html"}],["meta",{"property":"og:site_name","content":"转了码的刘公子"}],["meta",{"property":"og:title","content":"lab2 raft"}],["meta",{"property":"og:description","content":"测试 这些测试全面覆盖了Raft算法的核心功能，包括领导选举、日志复制、持久化、恢复、快照等，并在各种网络条件（可靠、不可靠）和故障情况（节点崩溃、网络分区）下进行测试，以确保算法的正确性和鲁棒性。 这些测试涵盖了Raft算法的多个关键方面。我将总结主要的测试类别和它们测试的具体内容: 领导选举 (2A) TestInitialElection2A: ..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2024-11-24T16:17:22.000Z"}],["meta",{"property":"article:modified_time","content":"2024-11-24T16:17:22.000Z"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"lab2 raft\\",\\"image\\":[\\"\\"],\\"dateModified\\":\\"2024-11-24T16:17:22.000Z\\",\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"转了码的刘公子\\",\\"url\\":\\"https://mister-hope.com\\"}]}"]]},"headers":[{"level":2,"title":"测试","slug":"测试","link":"#测试","children":[]},{"level":2,"title":"测试思路","slug":"测试思路","link":"#测试思路","children":[{"level":3,"title":"1. cfg","slug":"_1-cfg","link":"#_1-cfg","children":[]}]},{"level":2,"title":"自己的测试结果","slug":"自己的测试结果","link":"#自己的测试结果","children":[]}],"git":{"createdTime":1732465042000,"updatedTime":1732465042000,"contributors":[{"name":"Luis","email":"liuysh20@gmail.com","commits":1}]},"readingTime":{"minutes":4.53,"words":1358},"filePathRelative":"1 一切皆项目/Q2：做CS的经典lab/lab2 raft.md","localizedDate":"2024年11月25日","autoDesc":true}');export{r as comp,d as data};
