---
draw:
tags: []
title: bash
date created: 2024-07-11
date modified: 2024-11-12
---

Bash 是一种 Shell，而 Shell 是用来运行 Linux 命令的接口。

<!-- more -->

## 最近使用

```bash
head -100 priceValidation.log      查看日志的前一百行
tail -f bussiness.log              实时追加式查看日志
less +G bussiness.log              从后往前翻页式地查看日志，b 往上翻页，空格往下翻页
ls -ltr                          list, time, reverse
```

## cheatsheet

|      |                              |
| ---- | ---------------------------- |
| 文件相关 | ls, cd, tree                 |
| 内容相关 | cat，more，less，head，tail，grep |

|     |        |
| --- | ------ |
| -n  | number |
| b   | back   |
| 空格  | 下一页    |

在 Linux 系统中，`ll` 命令通常是 `ls -l` 的别名，用于列出当前目录下的文件和目录的详细列表，包括文件权限、链接数、所有者、组、大小、时间戳和名称。

添加 `-t` 选项到 `ll` 命令（即 `ll -t`），会根据文件和目录的修改时间进行排序，显示结果将按照修改时间从最新到最旧的顺序排列。这个命令非常有用，比如当你需要查看最近被修改的文件时。

如果在你的系统中 `ll` 命令没有预先定义，你可以通过执行 `alias ll='ls -l'` 来定义它，然后 `ll -t` 就会按照文件的修改时间排序显示详细列表。
---

### **格式：**

head[参数][文件]

### **参数：**

- -q 隐藏文件名
- -v 显示文件名
- -c<数目> 显示的字节数
- -n<行数> 显示的行数

### **实践：**

|   |
|---|
|`head -n` `10` `test.log ：查询日志文件中的头``10``行日志;`<br><br>`head -n -``10` `test.log ：查询日志文件除了最后``10``行的其他所有日志;`|

## **cat**

cat（英文全拼：concatenate）命令用于连接文件并打印到标准输出设备上。

### **格式：**

cat[-AbeEnstTuv][--help][--version]文件名

### **参数：**

- -n 或 --number：由 1 开始对所有输出的行数编号。
- -b 或 --number-nonblank：和 -n 相似，只不过对于空白行不编号。
- -s 或 --squeeze-blank：当遇到有连续两行以上的空白行，就代换为一行的空白行。
- -v 或 --show-nonprinting：使用 ^ 和 M- 符号，除了 LFD 和 TAB 之外。
- -E 或 --show-ends: 在每行结束处显示 $。
- -T 或 --show-tabs: 将 TAB 字符显示为 ^I。
- -A, --show-all：等价于 -vET。
- -e：等价于 "-vE" 选项；
- -t：等价于 "-vT" 选项；

### **实践：**

|                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       |
| ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| `cat info.log ：查看info.log的全部日志内容`<br><br>`cat info.log \| grep` `"java"` `：查看info.log的java关键字关联的全部内容`<br><br>`cat info.log \| grep -A` `5` `"java"` `：查看info.log的java关键字后``5``行关联的全部内容`<br><br>`cat info.log \| grep -B` `10` `"java"` `：查看info.log的java关键字前``10``行关联的全部内容`<br><br>`cat info.log \| grep -C` `20` `"java"` `：查看info.log的java关键字前后``20``行关联的全部内容`<br><br>`cat -n test.log \| grep` `"debug"` `：查询关键字的日志`<br><br>`cat -n test.log \| grep` `"error"` `\| more ：分页查看，使用空格翻页(使用more/less)`<br><br>`cat -n test.log \| tail -n +``92` `\| head -n` `20` `：如得到``"地形"``关键字所在的行号是``102``行. 此时如果我想查看这个关键字前``10``行和后``10``行的日志` |

## grep

Linux grep 命令用于查找文件里符合条件的字符串。grep 指令用于查找内容包含指定的范本样式的文件，如果发现某文件的内容符合所指定的范本样式，预设 grep 指令会把含有范本样式的那一列显示出来。若不指定任何文件名称，或是所给予的文件名为 -，则 grep 指令会从标准输入设备读取数据。

### 格式

grep [-abcEFGhHilLnqrsvVwxy][-A<显示行数>][-B<显示列数>][-C<显示列数>][-d<进行动作>][-e<范本样式>][-f<范本文件>][--help][范本样式][文件或目录...]

### 参数

- -a 或 --text : 不要忽略二进制的数据。
- -A<显示行数> 或 --after-context=<显示行数> : 除了显示符合范本样式的那一列之外，并显示该行之后的内容。
- -b 或 --byte-offset : 在显示符合样式的那一行之前，标示出该行第一个字符的编号。
- -B<显示行数> 或 --before-context=<显示行数> : 除了显示符合样式的那一行之外，并显示该行之前的内容。
- -c 或 --count : 计算符合样式的列数。
- -C<显示行数> 或 --context=<显示行数>或 -<显示行数> : 除了显示符合样式的那一行之外，并显示该行之前后的内容。
- -d <动作> 或 --directories=<动作> : 当指定要查找的是目录而非文件时，必须使用这项参数，否则 grep 指令将回报信息并停止动作。
- -e<范本样式> 或 --regexp=<范本样式> : 指定字符串做为查找文件内容的样式。
- -E 或 --extended-regexp : 将样式为延伸的 [正则表达式](正则表达式.md) 来使用。
- -f<规则文件> 或 --file=<规则文件> : 指定规则文件，其内容含有一个或多个规则样式，让 grep 查找符合规则条件的文件内容，格式为每行一个规则样式。
- -F 或 --fixed-regexp : 将样式视为固定字符串的列表。 
- -G 或 --basic-regexp : 将样式视为普通的表示法来使用。
- -h 或 --no-filename : 在显示符合样式的那一行之前，不标示该行所属的文件名称。
- -H 或 --with-filename : 在显示符合样式的那一行之前，表示该行所属的文件名称。
- -i 或 --ignore-case : 忽略字符大小写的差别。
- -l 或 --file-with-matches : 列出文件内容符合指定的样式的文件名称。
- -L 或 --files-without-match : 列出文件内容不符合指定的样式的文件名称。
- -n 或 --line-number : 在显示符合样式的那一行之前，标示出该行的列数编号。
- -o 或 --only-matching : 只显示匹配 PATTERN 部分。
- -q 或 --quiet 或 --silent : 不显示任何信息。
- -r 或 --recursive : 此参数的效果和指定 "-d recurse" 参数相同。
- -s 或 --no-messages : 不显示错误信息。
- -v 或 --invert-match : 显示不包含匹配文本的所有行。
- -V 或 --version : 显示版本信息。
- -w 或 --word-regexp : 只显示全字符合的列。
- -x --line-regexp : 只显示全列符合的列。
- -y : 此参数的效果和指定 "-i" 参数相同。

### 实践

|                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       |
| ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| `grep` `"abcd"` `test.log \| wc -l ：查看日志中特定字符的匹配数目`<br><br>`grep` `"text"` `trace.log ：查询单个文件(trace.log)中包含指定text的行`<br><br>`grep` `"text"` `*log* ：利用*适配符，在所有包含log的文件名中 查询 text`<br><br>`grep -r text /home/logs ：以递归的方式，在指定的目录及其子目录下面所有的文件中 查询 text`<br><br>`grep -rn` `"test"` `--exclude=*.txt ：查找包含text，但是排除txt文件`<br><br>`grep -rn` `"text"` `--exclude-from=skip.txt ：排除的条件存储在skip.txt文件里`<br><br>`grep -rn` `"text"` `--exclude-dir=aaa ：排除aaa目录下的所有文件`<br><br>`grep -v text *log ：查找所有不包含 text 的行，即反向查找`<br><br>`grep text -A/B/C n *log ：除了查找的那一行之外，多显示 其之后(-A)/之前(-B)/前后(-C) 的n行的值`<br><br>`grep -E` `"text1 \| text2 \| text3"` `*log ：匹配多个字符串，或关系，匹配其中一个就显示；`<br><br>`grep text1 *log \| grep text2 \|grep text3 ：与关系，匹配所有才显示`<br><br>`grep text *log --color=auto  或者  grep text *log --col ：让匹配的字符串显示颜色`<br><br>`cat filename \| grep -f key.txt ：匹配key.txt文件中所有关键字的行` |

## **linux 日志文件说明**

```js
/var/log/message 系统启动后的信息和错误日志，是Red Hat Linux中最常用的日志之一
/var/log/secure 与安全相关的日志信息
/var/log/maillog 与邮件相关的日志信息
/var/log/cron 与定时任务相关的日志信息
/var/log/spooler 与UUCP和news设备相关的日志信息
/var/log/boot.log 守护进程启动和停止相关的日志消息
/var/log/wtmp 该日志文件永久记录每个用户登录、注销及系统的启动、停机的事件
```
